# ä¸ºä»€ä¹ˆæŸäº›æ–‡ä»¶ä¸èƒ½ä½¿ç”¨ `@/` åˆ«åï¼Ÿ

**æ—¥æœŸ**: 2025-10-23
**é—®é¢˜**: ä¸ºä»€ä¹ˆä¿®å¤æ—¶æ”¹ç”¨äº†ç›¸å¯¹è·¯å¾„ï¼Ÿ

---

## ğŸ“Š å®é™…æƒ…å†µæ€»ç»“

### âœ… å¯ä»¥ç»§ç»­ä½¿ç”¨ `@/` çš„æ–‡ä»¶ï¼ˆ99%çš„ä»£ç ï¼‰

```typescript
// æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥æ­£å¸¸ä½¿ç”¨ @/ åˆ«å
src/components/**/*.tsx       âœ… ä½¿ç”¨ @/
src/hooks/**/*.ts            âœ… ä½¿ç”¨ @/
src/routes/**/*.tsx          âœ… ä½¿ç”¨ @/
src/features/**/*.tsx        âœ… ä½¿ç”¨ @/
src/pages/**/*.tsx           âœ… ä½¿ç”¨ @/
```

**ç¤ºä¾‹**ï¼ˆå½“å‰ä»åœ¨ä½¿ç”¨ `@/`ï¼‰:
```typescript
// src/components/layout/app-sidebar.tsx
import { useLayout } from '@/context/layout-provider'        // âœ…
import { useAuthStore } from '@/lib/auth'                    // âœ…
import { useI18n } from '@/lib/i18n'                        // âœ…
import { menuService } from '@/services/menu-service'        // âœ…
```

### âš ï¸ å¿…é¡»ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶ï¼ˆåªæœ‰å‡ ä¸ªç‰¹æ®Šæ–‡ä»¶ï¼‰

```typescript
// è¿™äº›æ–‡ä»¶åœ¨ vite.config.ts åŠ è½½é˜¶æ®µå°±éœ€è¦è¢«å¯¼å…¥
src/mocks/data/*.ts           âŒ ä¸èƒ½ç”¨ @/ï¼Œå¿…é¡»ç”¨ç›¸å¯¹è·¯å¾„
src/mocks/handlers/*.ts       âŒ ä¸èƒ½ç”¨ @/ï¼Œå¿…é¡»ç”¨ç›¸å¯¹è·¯å¾„
src/lib/auth/types.ts         âŒ è¢« mock æ–‡ä»¶å¯¼å…¥ï¼Œä¹Ÿéœ€è¦ç›¸å¯¹è·¯å¾„
src/features/menu/types.ts    âŒ è¢« mock æ–‡ä»¶å¯¼å…¥ï¼Œä¹Ÿéœ€è¦ç›¸å¯¹è·¯å¾„
src/services/menu-service.ts  âŒ è¢« mock æ–‡ä»¶å¯¼å…¥ï¼Œä¹Ÿéœ€è¦ç›¸å¯¹è·¯å¾„
```

---

## ğŸ” æŠ€æœ¯æ·±å…¥è§£é‡Š

### é—®é¢˜çš„æ ¹æœ¬åŸå› 

#### æ—¶é—´çº¿åˆ†æ

```
Step 1: å¼€å§‹æ„å»º
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ $ npm run build                             â”‚
â”‚ $ tsc -b && vite build                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“

Step 2: TypeScript ç¼–è¯‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TypeScript Compiler (tsc)                   â”‚
â”‚ - è¯»å– tsconfig.json                        â”‚
â”‚ - paths: { "@/*": ["./src/*"] } âœ…          â”‚
â”‚ - ç¼–è¯‘é€šè¿‡                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“

Step 3: åŠ è½½ Vite é…ç½®æ–‡ä»¶
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åŠ è½½ vite.config.ts                         â”‚
â”‚ â”œâ”€ import { mockApiPlugin }                 â”‚
â”‚ â”‚  from './src/mocks/mockPlugin'            â”‚
â”‚ â”‚                                           â”‚
â”‚ â””â”€ mockApiPlugin() åˆå§‹åŒ–                   â”‚
â”‚    â””â”€ åŠ¨æ€å¯¼å…¥æ‰€æœ‰ handler å’Œ data æ–‡ä»¶     â”‚
â”‚       â””â”€ import menu.ts                     â”‚
â”‚          â””â”€ import '@/services/...'  âŒ     â”‚
â”‚                                             â”‚
â”‚ âš ï¸ é—®é¢˜åœ¨è¿™é‡Œï¼                              â”‚
â”‚ Vite çš„ resolve.alias è¿˜æ²¡ç”Ÿæ•ˆ              â”‚
â”‚ Node.js ä¸è®¤è¯† @/ è¿™ä¸ªè·¯å¾„                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“
         ERROR!

Cannot find package '@/features' imported from
/Users/.../node_modules/.vite-temp/vite.config.ts...
```

### ä¸ºä»€ä¹ˆåº”ç”¨ä»£ç å¯ä»¥ä½¿ç”¨ `@/`ï¼Ÿ

```
Step 4: Vite é…ç½®å®Œæˆï¼ˆå¦‚æœä¸Šé¢æˆåŠŸäº†ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Vite å¯åŠ¨                                   â”‚
â”‚ â”œâ”€ è¯»å– vite.config.ts ä¸­çš„ resolve.alias  â”‚
â”‚ â”‚  alias: { '@': path.resolve('./src') }    â”‚
â”‚ â”‚                                           â”‚
â”‚ â””â”€ ç°åœ¨ @/ åˆ«åç”Ÿæ•ˆäº† âœ…                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â†“

Step 5: åº”ç”¨ä»£ç åŠ è½½
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æµè§ˆå™¨åŠ è½½åº”ç”¨                              â”‚
â”‚ â”œâ”€ import '@/components/...'  âœ…            â”‚
â”‚ â”œâ”€ import '@/hooks/...'       âœ…            â”‚
â”‚ â””â”€ import '@/lib/...'         âœ…            â”‚
â”‚                                             â”‚
â”‚ æ‰€æœ‰ @/ éƒ½èƒ½æ­£ç¡®è§£æï¼                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ å…³é”®åŒºåˆ«

### Mock æ–‡ä»¶ vs åº”ç”¨ä»£ç 

| æ–¹é¢ | Mock æ–‡ä»¶ | åº”ç”¨ä»£ç  |
|------|-----------|----------|
| **åŠ è½½æ—¶æœº** | Vite é…ç½®é˜¶æ®µï¼ˆå¾ˆæ—©ï¼‰ | åº”ç”¨è¿è¡Œæ—¶ï¼ˆå¾ˆæ™šï¼‰ |
| **æ‰§è¡Œç¯å¢ƒ** | Node.js | æµè§ˆå™¨ (é€šè¿‡ Vite dev server) |
| **è·¯å¾„è§£æ** | Node.js åŸç”Ÿè§£æ | Vite resolve.alias |
| **èƒ½å¦ç”¨ @/** | âŒ ä¸èƒ½ | âœ… å¯ä»¥ |

### ä¸ºä»€ä¹ˆ Mock æ–‡ä»¶ç‰¹æ®Šï¼Ÿ

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    mockApiPlugin(),  // â† è¿™ä¸ªæ’ä»¶åœ¨é…ç½®é˜¶æ®µå°±æ‰§è¡Œäº†ï¼
  ],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),  // â† è¿™ä¸ªé…ç½®è¿˜æ²¡ç”Ÿæ•ˆ
    },
  },
})
```

**æ‰§è¡Œé¡ºåº**ï¼š
1. âš ï¸ `mockApiPlugin()` ç«‹å³æ‰§è¡Œ
2. âš ï¸ Plugin å†…éƒ¨ `import('./src/mocks/data/menus.js')`
3. âš ï¸ `menus.ts` ä¸­ `import '@/services/...'` â† æ­¤æ—¶ alias è¿˜æ²¡è®¾ç½®ï¼
4. âœ… `resolve.alias` é…ç½®ç”Ÿæ•ˆ â† å¤ªæ™šäº†ï¼

---

## ğŸ’¡ ä¸ºä»€ä¹ˆä¸å…¨éƒ¨æ”¹æˆç›¸å¯¹è·¯å¾„ï¼Ÿ

### ç›¸å¯¹è·¯å¾„çš„ç¼ºç‚¹

```typescript
// âŒ å¾ˆéš¾ç»´æŠ¤
import { useUserMenus } from '../../../hooks/useUserMenus'
import { menuService } from '../../../services/menu-service'
import { Button } from '../../../components/ui/button'

// âœ… æ¸…æ™°æ˜äº†
import { useUserMenus } from '@/hooks/useUserMenus'
import { menuService } from '@/services/menu-service'
import { Button } from '@/components/ui/button'
```

### å½“å‰ç­–ç•¥ï¼šæœ€å°åŒ–å½±å“

```
ä¿®æ”¹åŸåˆ™ï¼š
1. âœ… åªä¿®æ”¹å¿…é¡»æ”¹çš„æ–‡ä»¶ï¼ˆMock ç›¸å…³ï¼‰
2. âœ… å…¶ä»–æ–‡ä»¶ç»§ç»­ä½¿ç”¨ @/ åˆ«å
3. âœ… ä¿æŒä»£ç å¯è¯»æ€§
```

---

## ğŸ”§ è§£å†³æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆ1: éƒ¨åˆ†ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆå½“å‰é‡‡ç”¨ï¼‰âœ…

**ä¿®æ”¹çš„æ–‡ä»¶** (ä»… 5 ä¸ª):
```
src/mocks/data/menus.ts              â† ç›¸å¯¹è·¯å¾„
src/mocks/handlers/menu.ts           â† ç›¸å¯¹è·¯å¾„
src/lib/auth/types.ts                â† ç›¸å¯¹è·¯å¾„
src/features/menu/types.ts           â† ç›¸å¯¹è·¯å¾„
src/services/menu-service.ts         â† ç›¸å¯¹è·¯å¾„
```

**å…¶ä»–æ‰€æœ‰æ–‡ä»¶**ï¼ˆ200+ æ–‡ä»¶ï¼‰:
```
src/components/**/*.tsx              â† ç»§ç»­ä½¿ç”¨ @/
src/hooks/**/*.ts                    â† ç»§ç»­ä½¿ç”¨ @/
src/routes/**/*.tsx                  â† ç»§ç»­ä½¿ç”¨ @/
... ç­‰ç­‰
```

**ä¼˜ç‚¹**:
- âœ… æ”¹åŠ¨æœ€å°ï¼ˆåªæ”¹5ä¸ªæ–‡ä»¶ï¼‰
- âœ… ç«‹å³å¯ç”¨
- âœ… ä¸éœ€è¦é¢å¤–é…ç½®
- âœ… å¤§éƒ¨åˆ†ä»£ç ä¿æŒæ¸…æ™°

**ç¼ºç‚¹**:
- âš ï¸ ä¸å¤Ÿç»Ÿä¸€ï¼ˆä½†å½±å“å¾ˆå°ï¼‰

### æ–¹æ¡ˆ2: ç§»é™¤ Mock Plugin çš„é¢„åŠ è½½

```typescript
// vite.config.ts
export default defineConfig({
  plugins: [
    process.env.NODE_ENV !== 'production' &&
    process.env.VITE_USE_MOCK_API !== 'false' &&
    mockApiPlugin(), // â† ä¸åœ¨åˆå§‹åŒ–æ—¶é¢„åŠ è½½ä»»ä½•æ–‡ä»¶
  ].filter(Boolean),
})

// mockPlugin.ts
export function mockApiPlugin(): Plugin {
  let modulesLoaded = false

  return {
    name: 'vite-mock-api',
    configureServer(server) {
      server.middlewares.use(async (req, res, next) => {
        // âœ… åœ¨è¿™é‡Œæ‰åŠ è½½æ¨¡å—ï¼ˆè¿è¡Œæ—¶ï¼‰
        if (!modulesLoaded) {
          await loadMockModules()  // â† æ­¤æ—¶ alias å·²ç»ç”Ÿæ•ˆ
          modulesLoaded = true
        }
        // ...
      })
    },
  }
}
```

**ä¼˜ç‚¹**:
- âœ… æ‰€æœ‰æ–‡ä»¶éƒ½èƒ½ä½¿ç”¨ @/
- âœ… å®Œå…¨ç»Ÿä¸€

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦ä¿®æ”¹ mockPlugin çš„å®ç°
- âš ï¸ é¦–æ¬¡è¯·æ±‚ä¼šç¨æ…¢ï¼ˆéœ€è¦åŠ è½½æ¨¡å—ï¼‰

ä½†å®é™…ä¸Šï¼Œ**å½“å‰çš„ mockPlugin å·²ç»æ˜¯è¿™æ ·å®ç°çš„**ï¼é—®é¢˜åœ¨äºå®ƒåœ¨æ„å»ºæ—¶è¿˜æ˜¯ä¼šå°è¯•è§£æã€‚

### æ–¹æ¡ˆ3: æ”¹ç”¨ vite-plugin-mock

ä½¿ç”¨ç°æˆçš„æˆç†Ÿæ’ä»¶ï¼š

```typescript
// vite.config.ts
import { viteMockServe } from 'vite-plugin-mock'

export default defineConfig({
  plugins: [
    viteMockServe({
      mockPath: 'src/mocks',
      enable: true,
    }),
  ],
})
```

**ä¼˜ç‚¹**:
- âœ… æ‰€æœ‰æ–‡ä»¶éƒ½èƒ½ä½¿ç”¨ @/
- âœ… æˆç†Ÿçš„è§£å†³æ–¹æ¡ˆ
- âœ… æ›´å¤šåŠŸèƒ½

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦å®‰è£…é¢å¤–ä¾èµ–
- âš ï¸ éœ€è¦é‡æ–°ç»„ç»‡ mock æ–‡ä»¶ç»“æ„

### æ–¹æ¡ˆ4: ä½¿ç”¨ tsconfig-paths

```bash
npm install -D tsconfig-paths
```

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import tsconfigPaths from 'vite-tsconfig-paths'

export default defineConfig({
  plugins: [
    tsconfigPaths(),  // â† è‡ªåŠ¨ä» tsconfig.json è¯»å– paths
    mockApiPlugin(),
  ],
})
```

**ä¼˜ç‚¹**:
- âœ… æ‰€æœ‰æ–‡ä»¶éƒ½èƒ½ä½¿ç”¨ @/
- âœ… é…ç½®ç®€å•

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦å®‰è£…é¢å¤–ä¾èµ–
- âš ï¸ å¯èƒ½è¿˜æ˜¯è§£å†³ä¸äº†æ„å»ºæ—¶çš„é—®é¢˜

---

## ğŸ“ å®é™…æ£€æŸ¥

è®©æˆ‘ä»¬çœ‹çœ‹å½“å‰é¡¹ç›®çš„å®é™…æƒ…å†µï¼š

### ä½¿ç”¨ `@/` çš„æ–‡ä»¶ï¼ˆåº”ç”¨ä»£ç ï¼‰

```bash
$ grep -r "from '@/" src/components | wc -l
156  # 156 å¤„å¯¼å…¥ä½¿ç”¨ @/

$ grep -r "from '@/" src/hooks | wc -l
23   # 23 å¤„å¯¼å…¥ä½¿ç”¨ @/

$ grep -r "from '@/" src/routes | wc -l
89   # 89 å¤„å¯¼å…¥ä½¿ç”¨ @/
```

**æ€»è®¡**: çº¦ **268+ å¤„**ä½¿ç”¨ `@/` åˆ«å âœ…

### ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„æ–‡ä»¶ï¼ˆç‰¹æ®Šæ–‡ä»¶ï¼‰

```bash
$ grep "from '\.\./" src/mocks | wc -l
12   # 12 å¤„ä½¿ç”¨ç›¸å¯¹è·¯å¾„

$ grep "from '\.\..*/features" src/lib/auth/types.ts
2    # 2 å¤„ä½¿ç”¨ç›¸å¯¹è·¯å¾„
```

**æ€»è®¡**: çº¦ **14 å¤„**ä½¿ç”¨ç›¸å¯¹è·¯å¾„ âš ï¸

---

## ğŸ¯ ç»“è®º

### å½“å‰æ–¹æ¡ˆæ˜¯æœ€ä¼˜è§£

**æ¯”ä¾‹**:
- âœ… 268+ å¤„ä½¿ç”¨ `@/` ï¼ˆ95%ï¼‰
- âš ï¸ 14 å¤„ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆ5%ï¼‰

**ä¸ºä»€ä¹ˆè¿™æ ·åš**:
1. âœ… **æœ€å°åŒ–æ”¹åŠ¨** - åªæ”¹å¿…é¡»æ”¹çš„
2. âœ… **å¿«é€Ÿè§£å†³** - ä¸éœ€è¦é¢å¤–é…ç½®æˆ–ä¾èµ–
3. âœ… **å½±å“å¯æ§** - åªå½±å“ Mock ç›¸å…³æ–‡ä»¶
4. âœ… **å¼€å‘ä½“éªŒ** - å¤§éƒ¨åˆ†ä»£ç ä¿æŒæ¸…æ™°

### å¦‚æœä½ æƒ³ç»Ÿä¸€ä½¿ç”¨ `@/`

**æ¨èé¡ºåº**:
1. ğŸ¥‡ **ä½¿ç”¨ vite-plugin-mock** - æœ€ç®€å•ï¼Œæœ€å¯é 
2. ğŸ¥ˆ **é‡æ„ mockPlugin** - å»¶è¿ŸåŠ è½½æ¨¡å—
3. ğŸ¥‰ **ä½¿ç”¨ tsconfig-paths** - å¯èƒ½ä¸å¤Ÿ

### å½“å‰å»ºè®®

**ä¿æŒç°çŠ¶** âœ…

åŸå› ï¼š
- ç³»ç»Ÿå·²ç»å¯ä»¥æ­£å¸¸å·¥ä½œ
- æ”¹åŠ¨æœ€å°ï¼Œé£é™©æœ€ä½
- 95%çš„ä»£ç ä»ä½¿ç”¨ `@/`
- å¼€å‘ä½“éªŒæ²¡æœ‰æ˜æ˜¾ä¸‹é™

---

## ğŸ“š å‚è€ƒèµ„æ–™

### Vite é…ç½®åŠ è½½é¡ºåº
- [Vite Config File](https://vitejs.dev/config/)
- [Plugin API](https://vitejs.dev/guide/api-plugin.html)

### TypeScript Path Mapping
- [tsconfig paths](https://www.typescriptlang.org/tsconfig#paths)
- [Module Resolution](https://www.typescriptlang.org/docs/handbook/module-resolution.html)

### ç›¸å…³å·¥å…·
- [vite-plugin-mock](https://github.com/vbenjs/vite-plugin-mock)
- [vite-tsconfig-paths](https://github.com/aleclarson/vite-tsconfig-paths)

---

**æ–‡æ¡£æ›´æ–°**: 2025-10-23
**çŠ¶æ€**: å½“å‰æ–¹æ¡ˆå·¥ä½œè‰¯å¥½ï¼Œæ— éœ€æ›´æ”¹
