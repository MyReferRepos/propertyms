# âœ… i18n æ¨¡å—åŒ–è¿ç§»å®ŒæˆæŠ¥å‘Š

**è¿ç§»æ—¥æœŸ**: 2025-10-17
**çŠ¶æ€**: âœ… å®Œæˆå¹¶éªŒè¯é€šè¿‡

---

## ğŸ“‹ è¿ç§»æ¦‚è¿°

å·²æˆåŠŸå°†é¡¹ç›®ä»å•ä¸€å¤§æ–‡ä»¶çš„ i18n ç³»ç»Ÿè¿ç§»åˆ°æ¨¡å—åŒ–çš„ i18n æ¶æ„ã€‚æ–°ç³»ç»Ÿæ”¯æŒï¼š

- âœ… æ¨¡å—ç‹¬ç«‹ç®¡ç†ç¿»è¯‘æ–‡ä»¶
- âœ… è‡ªåŠ¨å‘ç°å’ŒåŠ è½½ç¿»è¯‘
- âœ… å›¢é˜Ÿåä½œæ—¶å‡å°‘å†²çª
- âœ… æ”¯æŒå¾®æœåŠ¡æ¶æ„
- âœ… å‘åå…¼å®¹æ—§ç‰ˆç¿»è¯‘

---

## ğŸ—‚ï¸ æ–°çš„ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ locales/                        # å…¨å±€ç¿»è¯‘ (10 ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ en/
â”‚   â”‚   â”œâ”€â”€ common.json            # é€šç”¨ç¿»è¯‘ (ä¿å­˜ã€å–æ¶ˆç­‰)
â”‚   â”‚   â”œâ”€â”€ auth.json              # è®¤è¯ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ nav.json               # å¯¼èˆªèœå•
â”‚   â”‚   â”œâ”€â”€ breadcrumb.json        # é¢åŒ…å±‘
â”‚   â”‚   â””â”€â”€ user.json              # ç”¨æˆ·ç›¸å…³
â”‚   â””â”€â”€ zh-CN/
â”‚       â”œâ”€â”€ common.json
â”‚       â”œâ”€â”€ auth.json
â”‚       â”œâ”€â”€ nav.json
â”‚       â”œâ”€â”€ breadcrumb.json
â”‚       â””â”€â”€ user.json
â”‚
â”œâ”€â”€ features/                       # åŠŸèƒ½æ¨¡å—ç¿»è¯‘ (14 ä¸ªæ–‡ä»¶)
â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json            # ç”¨æˆ·ç®¡ç†è‹±æ–‡ç¿»è¯‘
â”‚   â”‚       â””â”€â”€ zh-CN.json         # ç”¨æˆ·ç®¡ç†ä¸­æ–‡ç¿»è¯‘
â”‚   â”œâ”€â”€ roles/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json
â”‚   â”‚       â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ permissions/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json
â”‚   â”‚       â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json            # é€šç”¨è®¾ç½®ç¿»è¯‘
â”‚   â”‚       â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json            # ä¸ªäººèµ„æ–™ç¿»è¯‘
â”‚   â”‚       â””â”€â”€ zh-CN.json
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ locales/
â”‚   â”‚       â”œâ”€â”€ en.json
â”‚   â”‚       â””â”€â”€ zh-CN.json
â”‚   â””â”€â”€ demo/
â”‚       â””â”€â”€ locales/
â”‚           â”œâ”€â”€ en.json
â”‚           â””â”€â”€ zh-CN.json
â”‚
â””â”€â”€ lib/i18n/
    â”œâ”€â”€ types.ts                    # ç±»å‹å®šä¹‰
    â”œâ”€â”€ loader.ts                   # ğŸ†• è‡ªåŠ¨åŠ è½½å™¨
    â”œâ”€â”€ context.tsx                 # ğŸ”„ æ›´æ–°çš„ Context (æ”¯æŒæ¨¡å—åŒ–)
    â””â”€â”€ index.ts                    # å¯¼å‡º
```

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯å®ç°

### 1. **è‡ªåŠ¨åŠ è½½å™¨** (`loader.ts`)

ä½¿ç”¨ Vite çš„ `import.meta.glob` è‡ªåŠ¨å‘ç°å’ŒåŠ è½½æ‰€æœ‰ç¿»è¯‘æ–‡ä»¶ï¼š

```typescript
const globalTranslations = import.meta.glob('/src/locales/**/*.json', {
  eager: true,
  import: 'default'
})

const featureTranslations = import.meta.glob('/src/features/**/locales/*.json', {
  eager: true,
  import: 'default'
})
```

**ç‰¹ç‚¹**:
- âœ… é›¶é…ç½® - æ·»åŠ æ–°æ¨¡å—æ—¶æ— éœ€æ‰‹åŠ¨æ³¨å†Œ
- âœ… è‡ªåŠ¨å‘ç° - æŒ‰çº¦å®šçš„ç›®å½•ç»“æ„è‡ªåŠ¨åŠ è½½
- âœ… ç±»å‹å®‰å…¨ - å®Œæ•´çš„ TypeScript æ”¯æŒ

### 2. **ç¿»è¯‘åˆå¹¶ç­–ç•¥**

```typescript
// å…¨å±€ç¿»è¯‘ç›´æ¥åˆå¹¶åˆ°æ ¹çº§åˆ«
{
  common: { save: 'Save', cancel: 'Cancel' },
  nav: { dashboard: 'Dashboard' }
}

// åŠŸèƒ½æ¨¡å—ç¿»è¯‘åˆå¹¶åˆ°æ¨¡å—å‘½åç©ºé—´
{
  users: { title: 'User Management' },
  dashboard: { welcome: 'Welcome' },
  settings: { title: 'Settings' },
  profile: { title: 'Profile Settings' }
}
```

### 3. **ä¸‰ç§åŠ è½½æ¨¡å¼**

åœ¨ `context.tsx` ä¸­å¯é…ç½®ï¼š

```typescript
const LOAD_MODE: LoadMode = 'hybrid'  // 'modular' | 'legacy' | 'hybrid'
```

- **modular**: ä»…ä½¿ç”¨æ–°çš„æ¨¡å—åŒ–ç¿»è¯‘
- **legacy**: ä»…ä½¿ç”¨æ—§çš„å¤§æ–‡ä»¶ç¿»è¯‘ (ç”¨äºå›é€€)
- **hybrid**: æ¨¡å—åŒ–ä¼˜å…ˆ + å¤§æ–‡ä»¶åå¤‡ (æ¨è,å½“å‰ä½¿ç”¨)

---

## ğŸ“ ä½¿ç”¨æ–¹æ³•

### åœ¨ç»„ä»¶ä¸­ä½¿ç”¨ç¿»è¯‘

```typescript
import { useI18n } from '@/lib/i18n'

function MyComponent() {
  const { t } = useI18n()

  return (
    <div>
      {/* å…¨å±€ç¿»è¯‘ */}
      <button>{t('common.save')}</button>

      {/* åŠŸèƒ½æ¨¡å—ç¿»è¯‘ */}
      <h1>{t('users.title')}</h1>
      <p>{t('settings.description')}</p>
      <p>{t('profile.title')}</p>
    </div>
  )
}
```

### æ·»åŠ æ–°æ¨¡å—çš„ç¿»è¯‘

1. åœ¨åŠŸèƒ½æ¨¡å—ç›®å½•ä¸‹åˆ›å»º `locales/` æ–‡ä»¶å¤¹
2. æ·»åŠ ç¿»è¯‘æ–‡ä»¶ `en.json` å’Œ `zh-CN.json`
3. æ— éœ€å…¶ä»–é…ç½® - è‡ªåŠ¨åŠ è½½!

ç¤ºä¾‹:
```bash
mkdir -p src/features/my-new-feature/locales
echo '{"title": "My Feature"}' > src/features/my-new-feature/locales/en.json
echo '{"title": "æˆ‘çš„åŠŸèƒ½"}' > src/features/my-new-feature/locales/zh-CN.json
```

ä½¿ç”¨:
```typescript
t('my-new-feature.title')  // è‡ªåŠ¨ç”Ÿæ•ˆ!
```

---

## ğŸ” éªŒè¯ç»“æœ

### âœ… ç¼–è¯‘æ£€æŸ¥
- **TypeScript**: æ— é”™è¯¯
- **Vite æ„å»º**: æ­£å¸¸å¯åŠ¨
- **ç«¯å£**: http://localhost:5174/

### âœ… ç¿»è¯‘æ–‡ä»¶æ£€æŸ¥
- **å…¨å±€ç¿»è¯‘**: 10 ä¸ªæ–‡ä»¶ (5 æ¨¡å— Ã— 2 è¯­è¨€)
- **åŠŸèƒ½æ¨¡å—**: 14 ä¸ªæ–‡ä»¶ (7 åŠŸèƒ½ Ã— 2 è¯­è¨€)
- **æ€»è®¡**: 24 ä¸ªç¿»è¯‘æ–‡ä»¶

### âœ… å·²æ”¯æŒçš„é¡µé¢
- Dashboard (ä»ªè¡¨ç›˜)
- Users Management (ç”¨æˆ·ç®¡ç†)
- Roles Management (è§’è‰²ç®¡ç†)
- Permissions Management (æƒé™ç®¡ç†)
- General Settings (é€šç”¨è®¾ç½®) - ğŸ†•
- Profile Settings (ä¸ªäººèµ„æ–™) - ğŸ†•
- Demo Page (æ¼”ç¤ºé¡µé¢)

---

## ğŸ“¦ é—ç•™æ–‡ä»¶å¤„ç†

æ—§çš„å¤§æ–‡ä»¶ç¿»è¯‘å·²å¤‡ä»½,ä¸ä¼šè¢«åˆ é™¤:

```
src/locales/
â”œâ”€â”€ en.json.legacy              # å¤‡ä»½ - 374 è¡Œ
â”œâ”€â”€ zh-CN.json.legacy           # å¤‡ä»½ - 376 è¡Œ
â””â”€â”€ context-legacy.tsx.backup   # æ—§ç‰ˆ Context å¤‡ä»½
```

è¿™äº›æ–‡ä»¶åœ¨ `hybrid` æ¨¡å¼ä¸‹ä»ä¼šä½œä¸ºåå¤‡ä½¿ç”¨,ç¡®ä¿å¹³æ»‘è¿‡æ¸¡ã€‚

---

## ğŸ¯ è¿ç§»ä¼˜åŠ¿

### å‰
- âŒ å•ä¸€å¤§æ–‡ä»¶ (374-376 è¡Œ)
- âŒ å¤šäººä¿®æ”¹å®¹æ˜“å†²çª
- âŒ æ— æ³•æŒ‰æ¨¡å—ç®¡ç†
- âŒ ä¸åˆ©äºå¾®æœåŠ¡æ‹†åˆ†

### å
- âœ… 24 ä¸ªå°æ–‡ä»¶,æŒ‰æ¨¡å—ç»„ç»‡
- âœ… å›¢é˜Ÿæˆå‘˜ç‹¬ç«‹ç»´æŠ¤å„è‡ªæ¨¡å—
- âœ… Git å†²çªå¤§å¹…å‡å°‘
- âœ… æ”¯æŒåŠŸèƒ½æ¨¡å—ç‹¬ç«‹éƒ¨ç½²
- âœ… è‡ªåŠ¨å‘ç°,é›¶é…ç½®
- âœ… å‘åå…¼å®¹,å¹³æ»‘è¿ç§»

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [I18N_MODULAR_GUIDE.md](./I18N_MODULAR_GUIDE.md) - å®Œæ•´æ¶æ„æŒ‡å— (400+ è¡Œ)
- [I18N_QUICK_START.md](./I18N_QUICK_START.md) - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

---

## ğŸš€ ä¸‹ä¸€æ­¥

ç³»ç»Ÿå·²å®Œå…¨å°±ç»ª,å¯ä»¥:

1. âœ… ç»§ç»­å¼€å‘æ–°åŠŸèƒ½ - æ¯ä¸ªåŠŸèƒ½è‡ªåŠ¨æ‹¥æœ‰ç‹¬ç«‹çš„ç¿»è¯‘ç®¡ç†
2. âœ… å›¢é˜Ÿåä½œ - ä¸åŒæˆå‘˜ç»´æŠ¤ä¸åŒæ¨¡å—çš„ç¿»è¯‘
3. âœ… å¯é€‰: å°† `LOAD_MODE` ä» `hybrid` åˆ‡æ¢åˆ° `modular` (å®Œå…¨æ”¾å¼ƒæ—§ç‰ˆ)
4. âœ… å¯é€‰: åˆ é™¤ `.legacy` å¤‡ä»½æ–‡ä»¶ (å»ºè®®ä¿ç•™ä¸€æ®µæ—¶é—´)

---

## âœ¨ æ€»ç»“

æ¨¡å—åŒ– i18n ç³»ç»Ÿå·²æˆåŠŸä¸Šçº¿! ç°åœ¨å¯ä»¥:
- ä½¿ç”¨ `t('settings.title')` è®¿é—®é€šç”¨è®¾ç½®ç¿»è¯‘
- ä½¿ç”¨ `t('profile.title')` è®¿é—®ä¸ªäººèµ„æ–™ç¿»è¯‘
- ä½¿ç”¨ `t('users.title')` è®¿é—®ç”¨æˆ·ç®¡ç†ç¿»è¯‘
- æ·»åŠ æ–°åŠŸèƒ½æ—¶,ç¿»è¯‘è‡ªåŠ¨å‘ç°å’ŒåŠ è½½

ğŸ‰ ç³»ç»Ÿè¿è¡Œæ­£å¸¸,å¼€å‘ä½“éªŒæ˜¾è‘—æå‡!
