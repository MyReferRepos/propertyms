# æƒé™æ¨¡å‹å¯¹æ¯”å›¾

## ğŸ”„ æ—§æ¨¡å‹ vs æ–°æ¨¡å‹

### æ—§æ¨¡å‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ—§æƒé™æ¨¡å‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Permission ç±»å‹ï¼šPAGE | API | BUTTON (3ç§)
Menu å…³è”ï¼špermissionIds: string[] (å¤šä¸ª)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Permission  â”‚  type = PAGE
â”‚  user:view   â”‚  code = "user:view"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ allowedApis
       â”‚
       â”œâ”€â”€â”€â”€â”€â–º API 1: GET /api/users
       â”œâ”€â”€â”€â”€â”€â–º API 2: GET /api/users/:id
       â””â”€â”€â”€â”€â”€â–º API 3: GET /api/users/statistics

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Permission  â”‚  type = BUTTON
â”‚  user:create â”‚  code = "user:create"
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ allowedApis
       â”‚
       â””â”€â”€â”€â”€â”€â–º API: POST /api/users

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Menu     â”‚  menuType = "menu"
â”‚  ç”¨æˆ·åˆ—è¡¨    â”‚  permissionIds = ["user:view", "user:create", ...]
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é—®é¢˜ï¼š
âŒ æƒé™ç±»å‹å¤æ‚ï¼ˆ3ç§ï¼‰
âŒ allowedApis å­—æ®µç»´æŠ¤æˆæœ¬é«˜
âŒ Menu å…³è”å¤šä¸ªæƒé™ï¼Œå…³ç³»å¤æ‚
```

---

### æ–°æ¨¡å‹æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         æ–°æƒé™æ¨¡å‹                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Permission ç±»å‹ï¼šMODULE | ACTION (2ç§)
Menu å…³è”ï¼špermissionId: string (å•ä¸ª)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Permission     â”‚  type = MODULE
â”‚   ç”¨æˆ·ç®¡ç†æ¨¡å—   â”‚  code = "user_module"
â”‚                  â”‚  path = "/api/users/*"
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Permission     â”‚  type = ACTION
â”‚   ç”¨æˆ·åˆ—è¡¨       â”‚  code = "user_list"
â”‚                  â”‚  module = "user_module"
â”‚                  â”‚  path = "/api/users"  (GET)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Permission     â”‚  type = ACTION
â”‚   åˆ›å»ºç”¨æˆ·       â”‚  code = "user_create"
â”‚                  â”‚  module = "user_module"
â”‚                  â”‚  path = "/api/users"  (POST)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Permission     â”‚  type = ACTION
â”‚   åˆ é™¤ç”¨æˆ·       â”‚  code = "user_delete"
â”‚                  â”‚  module = "user_module"
â”‚                  â”‚  path = "/api/users/:id"  (DELETE)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Menu        â”‚  menuType = "menu"
â”‚    ç”¨æˆ·åˆ—è¡¨      â”‚  permissionId = "user_list"  (å•ä¸ª)
â”‚                  â”‚  alwaysShow = false
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Menu        â”‚  menuType = "button"
â”‚    åˆ›å»ºæŒ‰é’®      â”‚  permissionId = "user_create"  (å•ä¸ª)
â”‚                  â”‚  alwaysShow = false
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¼˜åŠ¿ï¼š
âœ… æƒé™ç±»å‹ç®€åŒ–ï¼ˆ2ç§ï¼‰
âœ… path å­—æ®µç›´æ¥ç”¨äº API éªŒè¯
âœ… Menu åªå…³è”ä¸€ä¸ªæƒé™ï¼Œå…³ç³»æ¸…æ™°
âœ… æ”¯æŒæ‰¹é‡åˆ›å»ºå¸¸è§è¡Œä¸º
```

---

## ğŸ“‹ å·¥ä½œæµç¨‹å¯¹æ¯”

### æ—§æµç¨‹ï¼šæ·»åŠ "è®¢å•ç®¡ç†"

```
æ­¥éª¤ 1: åˆ›å»º 7 ä¸ªæƒé™
  1. order:view (PAGE)
  2. order:list:api (API) â† éœ€è¦æ‰‹åŠ¨ç»´æŠ¤ allowedApis
  3. order:detail:api (API)
  4. order:create (BUTTON)
  5. order:create:api (API)
  6. order:delete (BUTTON)
  7. order:delete:api (API)

æ­¥éª¤ 2: åˆ›å»ºèœå•
  - èœå•ï¼šè®¢å•åˆ—è¡¨
  - permissionIds: ["order:view", "order:create", "order:delete"]
    â†‘ éœ€è¦é€‰æ‹©å¤šä¸ªæƒé™

æ€»è®¡ï¼š7 ä¸ªæƒé™ï¼Œå¤æ‚çš„å…³è”å…³ç³»
```

### æ–°æµç¨‹ï¼šæ·»åŠ "è®¢å•ç®¡ç†"

```
æ­¥éª¤ 1: åˆ›å»ºæ¨¡å—æƒé™
  1. order_module (MODULE)
     - path: "/api/orders/*"

æ­¥éª¤ 2: æ‰¹é‡åˆ›å»ºè¡Œä¸ºæƒé™ï¼ˆä¸€æ¬¡æ“ä½œï¼‰
  é€‰æ‹©å¸¸è§è¡Œä¸ºï¼š
  âœ… list   â†’ order_list   â†’ /api/orders          (GET)
  âœ… view   â†’ order_view   â†’ /api/orders/:id      (GET)
  âœ… create â†’ order_create â†’ /api/orders          (POST)
  âœ… delete â†’ order_delete â†’ /api/orders/:id      (DELETE)

  ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ 4 ä¸ªæƒé™ï¼ŒåŒ…å«æ­£ç¡®çš„ path

æ­¥éª¤ 3: åˆ›å»ºèœå•
  - èœå•ï¼šè®¢å•åˆ—è¡¨
  - permissionId: "order_list" (å•ä¸ª)
  - alwaysShow: false

æ€»è®¡ï¼š5 ä¸ªæƒé™ï¼ˆ1ä¸ªæ¨¡å— + 4ä¸ªè¡Œä¸ºï¼‰ï¼Œç®€å•æ˜äº†
```

---

## ğŸ¨ UI å¯¹æ¯”

### æ—§ UIï¼šæƒé™åˆ›å»ºè¡¨å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ›å»ºæƒé™                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  åç§°:   [____________________]         â”‚
â”‚  ä»£ç :   [____________________]         â”‚
â”‚  ç±»å‹:   [PAGE â–¼] â† 3ä¸ªé€‰é¡¹             â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å¦‚æœé€‰æ‹© API:                     â”‚   â”‚
â”‚  â”‚ APIè·¯å¾„:  [_________________]    â”‚   â”‚
â”‚  â”‚ HTTPæ–¹æ³•: [GET â–¼]                â”‚   â”‚
â”‚  â”‚ çˆ¶æƒé™:   [user:create â–¼]        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚            [å–æ¶ˆ]  [ä¿å­˜]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–° UIï¼šæƒé™åˆ›å»ºè¡¨å•ï¼ˆæ¨¡å—ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ›å»ºæ¨¡å—æƒé™                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  åç§°:   [ç”¨æˆ·ç®¡ç†æ¨¡å—___]              â”‚
â”‚  ä»£ç :   [user_module____]              â”‚
â”‚  ç±»å‹:   [MODULE â–¼] â† åªæœ‰2ä¸ªé€‰é¡¹       â”‚
â”‚  è·¯å¾„:   [/api/users/*___]              â”‚
â”‚  æè¿°:   [ç”¨æˆ·ç®¡ç†ç›¸å…³åŠŸèƒ½___]          â”‚
â”‚                                          â”‚
â”‚  ğŸ¯ ä¸‹ä¸€æ­¥ï¼šæ‰¹é‡åˆ›å»ºè¡Œä¸ºæƒé™             â”‚
â”‚                                          â”‚
â”‚            [å–æ¶ˆ]  [ä¿å­˜å¹¶ç»§ç»­]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ä¿å­˜åè‡ªåŠ¨å¼¹å‡ºï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰¹é‡åˆ›å»ºè¡Œä¸ºæƒé™                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¸º"ç”¨æˆ·ç®¡ç†æ¨¡å—"é€‰æ‹©éœ€è¦çš„è¡Œä¸ºï¼š        â”‚
â”‚                                          â”‚
â”‚  â˜‘ åˆ—è¡¨ (list)   â†’ user_list           â”‚
â”‚  â˜‘ è¯¦æƒ… (view)   â†’ user_view           â”‚
â”‚  â˜‘ åˆ›å»º (create) â†’ user_create         â”‚
â”‚  â˜‘ ç¼–è¾‘ (edit)   â†’ user_edit           â”‚
â”‚  â˜‘ åˆ é™¤ (delete) â†’ user_delete         â”‚
â”‚  â˜ å¯¼å‡º (export) â†’ user_export         â”‚
â”‚  â˜ å¯¼å…¥ (import) â†’ user_import         â”‚
â”‚                                          â”‚
â”‚  å·²é€‰æ‹©: 5 ä¸ªè¡Œä¸º                        â”‚
â”‚  å°†åˆ›å»º: 5 ä¸ªæƒé™                        â”‚
â”‚                                          â”‚
â”‚            [å–æ¶ˆ]  [æ‰¹é‡åˆ›å»º]            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ–° UIï¼šèœå•åˆ›å»ºè¡¨å•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ›å»ºèœå•                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                          â”‚
â”‚  åç§°:     [UserList________]           â”‚
â”‚  æ ‡é¢˜:     [ç”¨æˆ·åˆ—è¡¨________]           â”‚
â”‚  èœå•ç±»å‹: [MENU â–¼]                     â”‚
â”‚  è·¯å¾„:     [/users__________]           â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â–¡ å§‹ç»ˆæ˜¾ç¤ºï¼ˆä¸å—æƒé™çº¦æŸï¼‰        â”‚   â”‚
â”‚  â”‚   å¯ç”¨åï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½èƒ½çœ‹åˆ°æ­¤èœå•  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ å…³è”æƒé™: (å•ä¸ª)                  â”‚   â”‚
â”‚  â”‚ [user_list â–¼]                    â”‚   â”‚
â”‚  â”‚                                   â”‚   â”‚
â”‚  â”‚ æ˜¾ç¤º:                             â”‚   â”‚
â”‚  â”‚ â€¢ MODULE: ç”¨æˆ·ç®¡ç†æ¨¡å—            â”‚   â”‚
â”‚  â”‚ â€¢ ACTION: ç”¨æˆ·åˆ—è¡¨                â”‚   â”‚
â”‚  â”‚   code: user_list                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                          â”‚
â”‚            [å–æ¶ˆ]  [ä¿å­˜]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” æƒé™éªŒè¯å¯¹æ¯”

### æ—§éªŒè¯é€»è¾‘

```typescript
// å‰ç«¯ï¼šéœ€è¦æ£€æŸ¥å¤šä¸ªæƒé™
if (!hasPermission('user:view')) {
  return <Forbidden />
}

// æŒ‰é’®æ˜¾ç¤º
{hasPermission('user:create') && (
  <Button onClick={handleCreate}>åˆ›å»º</Button>
)}

// åç«¯ï¼šå¤æ‚çš„ allowedApis åŒ¹é…
function checkPermission(req, userPermissions) {
  return userPermissions.some(perm => {
    return perm.allowedApis?.some(api => {
      return matchPath(api.apiPath, req.path) &&
             api.httpMethod === req.method
    })
  })
}
```

### æ–°éªŒè¯é€»è¾‘

```typescript
// å‰ç«¯ï¼šæ£€æŸ¥å•ä¸ªæƒé™ï¼ˆæ›´ç®€å•ï¼‰
if (!hasPermission('user_list')) {
  return <Forbidden />
}

// æŒ‰é’®æ˜¾ç¤º
{hasPermission('user_create') && (
  <Button onClick={handleCreate}>åˆ›å»º</Button>
)}

// åç«¯ï¼šç›´æ¥ path åŒ¹é…ï¼ˆæ›´é«˜æ•ˆï¼‰
function checkPermission(req, userPermissions) {
  return userPermissions.some(perm => {
    // ç›´æ¥åŒ¹é… path å­—æ®µ
    return matchPath(perm.path, req.path)
  })
}

// è·¯å¾„åŒ¹é…æ›´ç®€å•
function matchPath(permPath, reqPath) {
  // 1. é€šé…ç¬¦: /api/users/* åŒ¹é… /api/users/123
  if (permPath.endsWith('/*')) {
    return reqPath.startsWith(permPath.slice(0, -2))
  }

  // 2. å‚æ•°: /api/users/:id åŒ¹é… /api/users/123
  if (permPath.includes(':')) {
    const regex = new RegExp(
      '^' + permPath.replace(/:(\w+)/g, '[^/]+') + '$'
    )
    return regex.test(reqPath)
  }

  // 3. ç²¾ç¡®åŒ¹é…
  return permPath === reqPath
}
```

---

## ğŸ“Š æ•°æ®é‡å¯¹æ¯”

### ç¤ºä¾‹ï¼šå®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½

**æ—§æ¨¡å‹éœ€è¦åˆ›å»ºï¼š**

| ç±»å‹ | æ•°é‡ | ç¤ºä¾‹ |
|------|------|------|
| PAGE | 1 | user:view |
| API | 6 | user:list:api, user:detail:api, user:create:api, user:update:api, user:delete:api, user:export:api |
| BUTTON | 5 | user:create, user:edit, user:delete, user:export, user:import |
| **æ€»è®¡** | **12** | |

**æ–°æ¨¡å‹éœ€è¦åˆ›å»ºï¼š**

| ç±»å‹ | æ•°é‡ | ç¤ºä¾‹ |
|------|------|------|
| MODULE | 1 | user_module |
| ACTION | 6 | user_list, user_view, user_create, user_edit, user_delete, user_export |
| **æ€»è®¡** | **7** | |

**å‡å°‘ 42% çš„æƒé™æ•°é‡ï¼** âœ¨

---

## âœ… è¿ç§»æ£€æŸ¥æ¸…å•

### æ•°æ®åº“å˜æ›´

- [ ] Permission è¡¨æ·»åŠ  `path` å­—æ®µï¼ˆVARCHAR, NOT NULLï¼‰
- [ ] Permission è¡¨ä¿®æ”¹ `type` æšä¸¾ï¼ˆ'module', 'action'ï¼‰
- [ ] Permission è¡¨æ·»åŠ  `module` å­—æ®µï¼ˆVARCHAR, NULLABLEï¼‰
- [ ] Menu è¡¨æ·»åŠ  `alwaysShow` å­—æ®µï¼ˆBOOLEAN, DEFAULT falseï¼‰
- [ ] Menu è¡¨ä¿®æ”¹ `permissionIds` â†’ `permissionId`ï¼ˆå¤šå¯¹å¤šæ”¹ä¸ºå¤šå¯¹ä¸€ï¼‰

### åç«¯ API è°ƒæ•´

- [ ] æƒé™åˆ›å»º API æ”¯æŒ `path` å­—æ®µ
- [ ] æƒé™æ‰¹é‡åˆ›å»º APIï¼ˆå¯é€‰ï¼‰
- [ ] èœå•åˆ›å»º API æ”¯æŒ `permissionId` å’Œ `alwaysShow`
- [ ] ç”¨æˆ·æƒé™æŸ¥è¯¢ API è¿”å›åŒ…å« `path` çš„æƒé™åˆ—è¡¨
- [ ] èœå•æŸ¥è¯¢ API æ”¯æŒåŸºäº `alwaysShow` è¿‡æ»¤
- [ ] API æƒé™éªŒè¯ä¸­é—´ä»¶æ”¹ç”¨ `path` å­—æ®µåŒ¹é…

### å‰ç«¯è°ƒæ•´

- [ ] æ›´æ–° `Permission` ç±»å‹å®šä¹‰
- [ ] æ›´æ–° `Menu` ç±»å‹å®šä¹‰
- [ ] ä¿®æ”¹æƒé™åˆ›å»ºè¡¨å•
- [ ] æ·»åŠ æ‰¹é‡åˆ›å»ºè¡Œä¸ºæƒé™åŠŸèƒ½
- [ ] ä¿®æ”¹èœå•åˆ›å»ºè¡¨å•
- [ ] æ›´æ–° Sidebar è¿‡æ»¤é€»è¾‘
- [ ] æ›´æ–°æƒé™æ£€æŸ¥å·¥å…·å‡½æ•°

### æ•°æ®è¿ç§»

- [ ] è¿ç§»ç°æœ‰ Permission æ•°æ®
- [ ] è¿ç§»ç°æœ‰ Menu æ•°æ®
- [ ] éªŒè¯æƒé™å…³è”å…³ç³»
- [ ] æµ‹è¯•æƒé™éªŒè¯é€»è¾‘

---

## ğŸ¯ æ€»ç»“

| æ–¹é¢ | æ—§æ¨¡å‹ | æ–°æ¨¡å‹ | æ”¹è¿› |
|------|--------|--------|------|
| **æƒé™ç±»å‹** | 3ç§ (PAGE/API/BUTTON) | 2ç§ (MODULE/ACTION) | âœ… ç®€åŒ– |
| **API éªŒè¯** | allowedApis å­—æ®µ | path å­—æ®µ | âœ… ç»Ÿä¸€ |
| **Menu å…³è”** | å¤šä¸ªæƒé™ (permissionIds) | å•ä¸ªæƒé™ (permissionId) | âœ… æ¸…æ™° |
| **æƒé™æ•°é‡** | å¤š (éœ€è¦ API æƒé™) | å°‘ (å‡å°‘ ~40%) | âœ… ç²¾ç®€ |
| **åˆ›å»ºæ•ˆç‡** | é€ä¸ªåˆ›å»º | æ‰¹é‡åˆ›å»º | âœ… é«˜æ•ˆ |
| **ç»´æŠ¤æˆæœ¬** | é«˜ | ä½ | âœ… é™ä½ |
| **çµæ´»æ€§** | ä¸€èˆ¬ | é«˜ (alwaysShow) | âœ… æå‡ |

---

**æ–°æ¨¡å‹ä¼˜åŠ¿æ˜æ˜¾ï¼Œå€¼å¾—è¿ç§»ï¼** ğŸš€
